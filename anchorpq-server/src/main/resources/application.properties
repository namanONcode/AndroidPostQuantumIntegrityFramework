# =============================================================================
# AnchorPQ Server Configuration
# =============================================================================

# Application Name
quarkus.application.name=anchorpq-server
quarkus.application.version=1.0.0

# =============================================================================
# HTTP Configuration
# =============================================================================
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# CORS Configuration
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=content-type,content-length
quarkus.http.cors.access-control-max-age=24H

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USERNAME:anchorpq}
quarkus.datasource.password=${DB_PASSWORD:anchorpq_secret}
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:anchorpq}
quarkus.datasource.jdbc.max-size=20
quarkus.datasource.jdbc.min-size=5

# Hibernate ORM Configuration
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy

# =============================================================================
# Logging Configuration
# =============================================================================
quarkus.log.console.enable=true
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
quarkus.log.console.level=INFO
quarkus.log.level=INFO

# Application specific logging
quarkus.log.category."com.anchorpq".level=INFO
quarkus.log.category."org.hibernate".level=WARN
quarkus.log.category."io.quarkus".level=INFO


# =============================================================================
# Health & Metrics
# =============================================================================
quarkus.smallrye-health.root-path=/health
quarkus.health.extensions.enabled=true

# =============================================================================
# OpenAPI / Swagger UI
# =============================================================================
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

mp.openapi.extensions.smallrye.info.title=AnchorPQ Verification Server API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=Post-Quantum Secure Mobile Application Integrity Verification API using ML-KEM (CRYSTALS-Kyber)
mp.openapi.extensions.smallrye.info.contact.name=AnchorPQ Team
mp.openapi.extensions.smallrye.info.license.name=MIT License

# =============================================================================
# ML-KEM Cryptographic Configuration
# =============================================================================
# ML-KEM parameter set: ML-KEM-768 (recommended for balanced security/performance)
anchorpq.crypto.mlkem.parameter-set=ML-KEM-768

# Key persistence (optional): path to store/load keys from file
# Leave empty for in-memory key generation at startup
anchorpq.crypto.mlkem.key-file-path=${MLKEM_KEY_PATH:}

# HKDF parameters for deriving AES key from shared secret
anchorpq.crypto.hkdf.algorithm=SHA3-256
anchorpq.crypto.hkdf.info=AnchorPQ-v1-IntegrityVerification

# AES-GCM parameters
anchorpq.crypto.aes.key-size=256
anchorpq.crypto.aes.iv-size=12
anchorpq.crypto.aes.tag-size=128

# =============================================================================
# Rate Limiting (Basic)
# =============================================================================
anchorpq.ratelimit.enabled=true
anchorpq.ratelimit.requests-per-minute=60

# =============================================================================
# Container Image Configuration
# =============================================================================
# Set to false for manual docker build, true for automatic quarkus container build
quarkus.container-image.build=false
quarkus.container-image.group=anchorpq
quarkus.container-image.name=anchorpq-server
quarkus.container-image.tag=latest

# =============================================================================
# Development Profile Overrides
# =============================================================================
%dev.quarkus.log.level=DEBUG
%dev.quarkus.log.category."com.anchorpq".level=DEBUG
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.http.cors.origins=*
%dev.quarkus.swagger-ui.always-include=true

# Dev database (H2 in-memory for quick testing)
%dev.quarkus.datasource.db-kind=h2
%dev.quarkus.datasource.username=sa
%dev.quarkus.datasource.password=
%dev.quarkus.datasource.jdbc.url=jdbc:h2:mem:anchorpq;DB_CLOSE_DELAY=-1

# =============================================================================
# Test Profile Configuration
# =============================================================================
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.username=sa
%test.quarkus.datasource.password=
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:anchorpq_test;DB_CLOSE_DELAY=-1
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.log.level=DEBUG

